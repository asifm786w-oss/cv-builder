<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>{{ cv.full_name or "Curriculum Vitae" }}</title>

  <style>
    @page {
      size: A4;
      margin: 18mm 18mm 18mm 18mm;
    }

    body {
      font-family: "Calibri", "Helvetica", Arial, sans-serif;
      font-size: 11pt;
      color: #222222;
      line-height: 1.35;
    }

    /* ---------- GLOBAL ---------- */

    h1 {
      font-size: 22pt;
      letter-spacing: 0.04em;
      margin: 0 0 2pt 0;
    }

    .role-title {
      font-size: 11pt;
      color: #555;
      margin: 0 0 6pt 0;
    }

    .contact-line {
      font-size: 9.5pt;
      color: #555;
      margin: 0 0 12pt 0;
    }

    .contact-line span {
      margin-right: 12px;
    }

    .section {
      margin-top: 12pt;
    }

    .section-title {
      font-size: 11pt;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #555555;
      border-bottom: 1px solid #cccccc;
      padding-bottom: 3pt;
      margin-bottom: 4pt;
    }

    .summary {
      margin-top: 3pt;
    }

    .skills-line {
      font-size: 9.5pt;
      margin-top: 3pt;
    }

    .skills-line span {
      white-space: nowrap;
    }

    .skills-separator {
      color: #cccccc;
    }

    .small-text {
      font-size: 9pt;
      color: #555;
    }

    /* ---------- EXPERIENCE / EDUCATION ---------- */

    .item {
      margin-top: 7pt;
    }

    .item-header {
      width: 100%;
      font-size: 10.5pt;
    }

    .item-header-left {
      font-weight: bold;
      color: #222;
    }

    .item-header-sub {
      color: #444;
      font-weight: normal;
    }

    .item-header-right {
      text-align: right;
      white-space: nowrap;
      font-size: 9pt;
      color: #555;
    }

    .item-meta {
      font-size: 9pt;
      color: #555;
      margin-top: 1pt;
    }

    ul.bullets {
      margin: 3pt 0 0 15pt;
      padding: 0;
    }

    ul.bullets li {
      margin-bottom: 2pt;
    }

    /* Simple table layout for xhtml2pdf friendliness */
    table.full-width {
      width: 100%;
      border-collapse: collapse;
    }

    table.full-width td {
      vertical-align: top;
      padding: 0;
      border: none;
    }

    /* References */
    .references-text {
      margin-top: 3pt;
      font-size: 9.5pt;
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <div class="header">
    <h1>{{ cv.full_name or "" }}</h1>
    {% if cv.title %}
      <div class="role-title">{{ cv.title }}</div>
    {% endif %}

    <div class="contact-line">
     {% if cv.email %}
  <span>{{ cv.email }}</span>
{% endif %}
{% if cv.phone %}
  <span>{{ cv.phone }}</span>
{% endif %}
{% if cv.location %}
  <span>{{ cv.location }}</span>
{% endif %}
    </div>
  </div>

  <!-- SUMMARY -->
  {% if cv.summary %}
    <div class="section">
      <div class="section-title">Profile</div>
      <div class="summary">
        {{ cv.summary }}
      </div>
    </div>
  {% endif %}

  <!-- SKILLS -->
  {% if cv.skills %}
    <div class="section">
      <div class="section-title">Skills</div>
      <div class="skills-line">
        {% for skill in cv.skills %}
          <span>{{ skill }}</span>{% if not loop.last %}<span class="skills-separator"> • </span>{% endif %}
        {% endfor %}
      </div>
    </div>
  {% endif %}

  <!-- EDUCATION -->
  {% if cv.education %}
    <div class="section">
      <div class="section-title">Education</div>

      {% for edu in cv.education %}
        <div class="item">
          <table class="full-width">
            <tr>
              <td class="item-header-left">
                {{ edu.degree or "" }}
                {% if edu.institution %}
                  <span class="item-header-sub"> – {{ edu.institution }}</span>
                {% endif %}
              </td>
              <td class="item-header-right">
                {% if edu.start_date or edu.end_date %}
                  {{ edu.start_date or "" }}{% if edu.end_date %} – {{ edu.end_date }}{% endif %}
                {% endif %}
              </td>
            </tr>
          </table>

          {% if edu.location %}
            <div class="item-meta">{{ edu.location }}</div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <!-- EXPERIENCE -->
  {% if cv.experiences %}
    <div class="section">
      <div class="section-title">Experience</div>

      {% for exp in cv.experiences %}
        <div class="item">
          <table class="full-width">
            <tr>
              <td class="item-header-left">
                {{ exp.job_title or "" }}
                {% if exp.company %}
                  <span class="item-header-sub"> – {{ exp.company }}</span>
                {% endif %}
              </td>
              <td class="item-header-right">
                {% if exp.start_date or exp.end_date %}
                  {{ exp.start_date or "" }}{% if exp.end_date %} – {{ exp.end_date }}{% endif %}
                {% endif %}
              </td>
            </tr>
          </table>

          {% if exp.location %}
            <div class="item-meta">{{ exp.location }}</div>
          {% endif %}

          {% if exp.description %}
            <ul class="bullets">
              {# Split description into bullet lines #}
              {% for line in exp.description.split('\n') %}
                {% set stripped = line.strip() %}
                {% if stripped %}
                  <li>{{ stripped.lstrip('•').strip() }}</li>
                {% endif %}
              {% endfor %}
            </ul>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <!-- REFERENCES -->
  {% if cv.references %}
    <div class="section">
      <div class="section-title">References</div>
      <div class="references-text">
        {% for line in cv.references.split('\n') %}
          {{ line }}<br />
        {% endfor %}
      </div>
    </div>
  {% endif %}

</body>
</html>
